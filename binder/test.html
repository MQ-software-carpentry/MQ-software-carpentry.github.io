<html>
 <body>
  
 <style>
   body {
    font: normal 14px Verdana, Arial, sans-serif;
   }
 </style>
  
<br><br><br>
  
<h1 style="text-align:center">Binder Redirector - v1.5</h1>

<script> 
 
  // Redirect to Binder Launch page based on information in the referrer url
  //
  // inbound url must contain:  .*?target=<targeturl-containing-USER-and-REPO>
  // USER and REPO will be replace with info from the referrer (assuming we come from a github READM.md page)
 
  referrer = document.referrer.split('/');
 
  site = referrer[2];
  user = referrer[3];
  repo = referrer[4];
  target =  document.URL.replace(/.*?target=/, '');
 
  if (user == "") { alert("Missing GitHub Username"); }
 
  launch = target.replace(/USER/, user).replace(/REPO/, repo);
 
 
  // console.log('site: ', site, '\n');
  // console.log('user: ', user, '\n');
  // console.log('repo: ', repo, '\n');
  // console.log('extra: ', extra, '\n');
  // console.log('target: ', target, '\n');
  // console.log('launch: ', launch, '\n');

  //setTimeout(function(){ alert('Redirect ?'); window.location.href = launch;}, 2000);
  //setTimeout(function(){ window.location.href = launch;}, 10000);
  //window.location.href = launch;

</script>
  
  <br><br><br>
  
  <p style="text-align:center;">
  
  <script>
    if (user == "") {
      document.write("Redirection Failed");
    else {
      document.write('Binder Link: <a href="'+launch+'">');
      document.write(launch, '</a>');
      setTimeout(function(){ window.location.href = launch;}, 10000);
    }
  </script>
   
  <div style="text-align: center">
   
   <br><br><br><br>
   
   <p>
   If redirection fails, try disabling your Chrome <em>reduced-referrer-granularity</em> by cutting and pasting the following:
   
   <br><br><br><br>
    
   <strong>chrome://flags/#reduced-referrer-granularity</strong>
    
   <br><br><br><br>
    
   into Chrome, and changing it to <em>Disabled</em>:
   
   <br><br><br> 
   <img src="referrer-disable.png" style="border: 5px solid #AAA">>
    
   <br><br><br>
   then try again ...
    
  </div>
  
  </p>
  
  
 </body>
</html>
